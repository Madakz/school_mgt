{% extends "../student_base.html" %}
{% block content %}

<div class="dashboard-content-one">
  <!-- Student Table Area Start Here -->
  <div class="card height-auto">
      <div class="card-body">
          <div class="heading-layout1">
              <div class="item-title">
                  <h3>My Course Results</h3>
              </div>
              
          </div>

        {% if results_grouped %}
          {% for key, data in results_grouped.items %}
            <h5 class="mt-4 text-success">{{ key }}</h5>
            <div class="table-responsive">
              <table class="table display data-table text-nowrap">
                  <thead>
                      <tr>
                        <th>Course Code</th>
                        <th>Course Title</th>
                        <th>Credit Unit</th>
                        <th>Score</th>
                        <th>Grade</th>
                        <th>Status</th>
                        <th>Lecturer</th>
                      </tr>
                  </thead>
                  <tbody>
                    {% for r in data.results %}
                    <tr>
                      <td>{{ r.course.code }}</td>
                      <td>{{ r.course.title }}</td>
                      <td>{{ r.course.credit_unit }}</td>
                      <td>{{ r.score|default:"-" }}</td>
                      <td>{{ r.grade|default:"-" }}</td>
                      <td>
                        {% if r.status == "Approved" %}
                          <span class="badge bg-success text-white">Approved</span>
                        {% else %}
                          <span class="badge bg-warning text-dark">{{ r.status }}</span>
                        {% endif %}
                      </td>
                      <td>{{ r.lecturer }}</td>
                    </tr>
                    {% endfor %}
                  </tbody>
              </table>
              <hr>
              <div class="text-end mb-4">
                <h5>Semester GPA: {{ data.gpa }} </h5>
              </div>
              {% endfor %}
              <hr>
              <div class="text-end mt-3">
                <h4><strong>Cumulative GPA (CGPA):</strong> {{ cgpa }}</h4>
              </div>
            </div>

        {% else %}
          <p class="text-center text-muted">No course results available yet.</p>
        {% endif %}
          
          <div class="text-end mt-3">
          <a href="{% url 'student_dashboard' %}" class="btn btn-secondary">Back to Dashboard</a>
          </div>
        
      </div>
  </div>
</div>



{% endblock %}
