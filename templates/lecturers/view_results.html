{% extends 'lecturer_base.html' %}
{% block content %}
<div class="container mt-4">
  <h3 class="text-primary mb-3">Results for {{ course.title }} ({{ course.code }})</h3>

  <table class="table table-striped table-bordered">
    <thead class="table-dark">
      <tr>
        <th>Matric No</th>
        <th>Student Name</th>
        <th>Score</th>
        <th>Grade</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      {% for reg in registrations %}
        {% if reg.result %}
          <tr>
            <td>{{ reg.student.matric_no }}</td>
            <td>{{ reg.student.user.get_full_name }}</td>
            <td>{{ reg.result.score }}</td>
            <td>{{ reg.result.grade }}</td>
            <td style="color: #fff;">
              {% if reg.result.status == 'Approved' %}
                <span class="badge bg-success">Approved</span>
              {% else %}
                <span class="badge bg-warning text-dark">Pending</span>
              {% endif %}
            </td>
          </tr>
        {% else %}
          <tr>
            <td>{{ reg.student.matric_no }}</td>
            <td>{{ reg.student.user.get_full_name }}</td>
            <td colspan="3" class="text-center text-muted">No result submitted</td>
          </tr>
        {% endif %}
      {% empty %}
        <tr><td colspan="5" class="text-center">No students registered.</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <a href="{% url 'manage_results' course.id %}" class="btn btn-primary">Edit Pending Results</a>
  <a href="{% url 'lecturer_courses' %}" class="btn btn-secondary">Back to Courses</a>
</div>
{% endblock %}
