{% extends '../lecturer_base.html' %}
{% block content %}

<div>
  <h2 class="mb-4 text-primary">Welcome, {{ lecturer.user.get_full_name }}</h2>
</div>
<!-- Dashboard summery Start Here -->
    <div class="row gutters-20">
        <div class="col-xl-3 col-sm-6 col-12">
            <div class="dashboard-summery-one mg-b-20">
                <div class="row align-items-center">
                    <div class="col-6">
                        <div class="item-icon bg-light-green ">
                            <i class="flaticon-mortarboard text-blue"></i>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="item-content">
                            <div class="item-title">Assigned Courses</div>
                            <div class="item-number"><span class="counter" data-num="{{ total_courses }}">{{ total_courses }}</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-sm-6 col-12">
            <div class="dashboard-summery-one mg-b-20">
                <div class="row align-items-center">
                    <div class="col-6">
                        <div class="item-icon bg-light-blue">
                            <i class="flaticon-multiple-users-silhouette text-blue"></i>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="item-content">
                            <div class="item-title">Students</div>
                            <div class="item-number"><span class="counter" data-num="{{ total_students }}">{{ total_students }}</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-sm-6 col-12">
            <div class="dashboard-summery-one mg-b-20">
                <div class="row align-items-center">
                    <div class="col-6">
                        <div class="item-icon bg-light-green">
                            <i class="flaticon-shopping-list text-blue"></i>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="item-content">
                            <div class="item-title">Approved Results</div>
                            <div class="item-number"><span class="counter" data-num="{{ approved_results }}">{{ approved_results }}</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-sm-6 col-12">
            <div class="dashboard-summery-one mg-b-20">
                <div class="row align-items-center">
                    <div class="col-6">
                        <div class="item-icon bg-light-red">
                            <i class="flaticon-shopping-list text-red"></i>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="item-content">
                            <div class="item-title">Pending Results</div>
                            <div class="item-number"><span class="counter" data-num="{{ pending_results }}">{{ pending_results }}</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Dashboard summery End Here -->


    <!-- Metrics Dashboard Content Start Here -->
  <div class="row gutters-20">
      <div class="col-12 col-xl-6 col-6-xxxl">
          <div class="card dashboard-card-one pd-b-20">
              <div class="card-body">
                  <div class="heading-layout1">
                      <div class="item-title">
                          <h3>Results Status Overview</h3>
                      </div>
                      <div class="dropdown">
                          <a class="dropdown-toggle" href="index.html#" role="button" data-toggle="dropdown"
                              aria-expanded="false">...</a>

                          <div class="dropdown-menu dropdown-menu-right">
                              <a class="dropdown-item" href="#"><i
                                      class="fas fa-times text-orange-red"></i>Close</a>
                              <a class="dropdown-item" href="#"><i
                                      class="fas fa-cogs text-dark-pastel-green"></i>Edit</a>
                              <a class="dropdown-item" href="#"><i
                                      class="fas fa-redo-alt text-orange-peel"></i>Refresh</a>
                          </div>
                      </div>
                  </div>
                  
                  <div class="earning-chart-wrap">
                      <canvas id="resultsChart"></canvas>
                  </div>
              </div>
          </div>
      </div>

      <div class="col-12 col-xl-6 col-6-xxxl">
          <div class="card dashboard-card-four pd-b-20">
              <div class="card-body">
                  <div class="heading-layout1">
                      <div class="item-title">
                          <h3>Event Calender</h3>
                      </div>
                      <div class="dropdown">
                          <a class="dropdown-toggle" href="index.html#" role="button" data-toggle="dropdown"
                              aria-expanded="false">...</a>

                          <div class="dropdown-menu dropdown-menu-right">
                              <a class="dropdown-item" href="#"><i
                                      class="fas fa-times text-orange-red"></i>Close</a>
                              <a class="dropdown-item" href="#"><i
                                      class="fas fa-cogs text-dark-pastel-green"></i>Edit</a>
                              <a class="dropdown-item" href="#"><i
                                      class="fas fa-redo-alt text-orange-peel"></i>Refresh</a>
                          </div>
                      </div>
                  </div>
                  <div class="calender-wrap">
                      <div id="fc-calender" class="fc-calender"></div>
                  </div>
              </div>
          </div>
      </div>





      
      
      <div class="col-12 col-xl-12 col-12-xxxl">
        <div class="card dashboard-card-two pd-b-20">
            <div class="card-body">
              <div class="heading-layout1">
                <div class="item-title">
                  <h3>Student Results Grade Distribution</h3>
                </div>
                <div class="dropdown">
                  <a class="dropdown-toggle" href="index.html#" role="button" data-toggle="dropdown"
                      aria-expanded="false">...</a>

                  <div class="dropdown-menu dropdown-menu-right">
                    <a class="dropdown-item" href="#"><i class="fas fa-times text-orange-red"></i>Close</a>
                    <a class="dropdown-item" href="#"><i class="fas fa-cogs text-dark-pastel-green"></i>Edit</a>
                    <a class="dropdown-item" href="#"><i class="fas fa-redo-alt text-orange-peel"></i>Refresh</a>
                  </div>
                </div>
              </div>
              
              <div class="expense-chart-wrap">
                <canvas id="gradeChart" width="500" height="200"></canvas>
              </div>
            </div>
        </div>
      </div>
  </div>
  <!-- Metrics Dashboard Content End Here -->


<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('resultsChart').getContext('2d');
  const resultsChart = new Chart(ctx, {
    type: 'pie',
    data: {
      labels: ['Approved ({{ approved_percent }}%)', 'Pending ({{ pending_percent }}%)'],
      datasets: [{
        data: [{{ approved_results }}, {{ pending_results }}],
        backgroundColor: ['#28a745', '#ffc107'],
        borderColor: ['#fff', '#fff'],
        borderWidth: 2,
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: {
          position: 'bottom'
        },
        title: {
          display: true,
          text: 'Approved vs Pending Results',
          font: {
            size: 16
          }
        }
      }
    }
  });



  const gradeCtx = document.getElementById('gradeChart').getContext('2d');
  new Chart(gradeCtx, {
  type: 'bar',
  data: {
  labels: ['A', 'B', 'C', 'D', 'E', 'F'],
  datasets: [{
  label: 'Number of Students',
  data: [
    {{ grades.A }},
    {{ grades.B }},
    {{ grades.C }},
    {{ grades.D }},
    {{ grades.E }},
    {{ grades.F }}
  ],
  backgroundColor: ['#28a745', '#17a2b8', '#007bff', '#ffc107', '#fd7e14', '#dc3545'],
  borderWidth: 1
  }]
  },
  options: {
  responsive: true,
  plugins: {
  title: {
  display: true,
  text: 'Grade Performance Overview',
  font: { size: 16 }
  }
  },
  scales: {
  y: { beginAtZero: true }
  }
  }
  });
</script>
{% endblock %}